(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();function s(e){const n=document.getElementById(e);if(!n)throw new Error(`Element '${e}' not found`);return n}const t={window:s("console-window"),content:s("console-content"),command_path:s("console-command-path"),input_command:s("console-command"),clear_button:s("console-clear-button"),hide_button:s("console-hide-button"),show_button:s("console-show-button")};t.window.addEventListener("click",()=>{h()});t.clear_button.addEventListener("click",()=>{f()});t.show_button.addEventListener("click",()=>{p(),h()});t.hide_button.addEventListener("click",()=>{m()});function f(){t.content.innerText=""}function p(){t.window.style.display="block",t.show_button.style.display="none"}function m(){t.window.style.display="none",t.show_button.style.display="block"}function h(){t.input_command.focus()}function k(e){t.content.innerText+=e}function d(e){a("[SYSTEM][I]: ",e)}function _(e){a("[SYSTEM][E]: ",e)}function E(e){a("[ARDUINO]: ",e)}function a(e,n){k(e+n+`
`),console.log(e+n)}class w{__socket;__keep_connection;SERVER_ADDRESS="192.168.1.10:55555";constructor(){this.__socket=null,this.__keep_connection=!1}getConnectionMode(){return this.__keep_connection}setConnectionMode(n){this.__keep_connection=n}connect(n){this.isOpen()&&this.__socket.close(),this.__socket=new WebSocket(`ws://${this.SERVER_ADDRESS}`),this.__socket.onopen=()=>{d("Connected to the server"),n()},this.__socket.onmessage=i=>{E(i.data)},this.__socket.onerror=i=>{_(`WebSocket error: ${i.target}`)},this.__socket.onclose=()=>{d("Disconnected from the server")},d("Waiting for server to come online...")}sendCommand(n){if(!this.isOpen()){_("Couldn't send request: socket not open");return}let i;i=`Connection: ${this.__keep_connection?"keep_connection":"close_connection"}`+`
-- HEADER END --
`+n,this.__socket.send(i),d(`Sent request:
${i}`)}isOpen(){return this.__socket?.readyState===WebSocket.OPEN}}const r=new w,b={arduino_status:s("arduino-status"),arduino_keep_connection_checkbox:s("arduino-keep-connection-checkbox")};t.command_path.innerText=`Arduino@${r.SERVER_ADDRESS}>`;t.input_command.addEventListener("keydown",e=>{if(e.key==="Enter"){const n=t.input_command.value.trim();y(n),t.input_command.value=""}});function y(e){if(r.setConnectionMode(b.arduino_keep_connection_checkbox.checked),!e){_("No command provided, skipping");return}r.isOpen()?r.sendCommand(e):r.connect(()=>{r.sendCommand(e)})}
